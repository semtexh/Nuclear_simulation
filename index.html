
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fallout Simulation Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        #form { padding: 20px; background: #f5f5f5; display: flex; flex-wrap: wrap; gap: 10px; }
        select, input, button { padding: 8px; font-size: 14px; }
        #map { width: 100%; height: 80vh; }
        .form-section { flex: 1 1 200px; min-width: 180px; }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <div id="form">
        <div class="form-section">
            <label for="countrySelect">Country:</label>
            <select id="countrySelect"></select>
        </div>
        <div class="form-section">
            <label for="plantSelect">Nuclear Facility:</label>
            <select id="plantSelect"></select>
        </div>
        <div class="form-section">
            <label for="windSpeed">Wind Speed (km/h):</label>
            <input type="number" id="windSpeed" value="20">
        </div>
        <div class="form-section">
            <label for="windDir">Wind Direction (Â° from North):</label>
            <input type="number" id="windDir" value="90">
        </div>
        <div class="form-section">
            <button onclick="calculateFallout()">Simulate Fallout</button>
        </div>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([38, 35], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
        }).addTo(map);

        const nuclearData = [
            { country: "Germany", name: "Brokdorf", lat: 53.85, lon: 9.3 },
            { country: "UK", name: "Hinkley Point B", lat: 51.209, lon: -3.152 },
            { country: "Russia", name: "Kursk NPP", lat: 51.66, lon: 35.604 },
            { country: "Iran", name: "Bushehr", lat: 28.829, lon: 50.893 },
            { country: "Israel", name: "Dimona Research Center", lat: 31.05, lon: 35.03 },
            { country: "Turkey", name: "Akkuyu", lat: 36.15, lon: 33.5 },
            { country: "Kuwait", name: "No Nuclear Plant", lat: 29.3759, lon: 47.9774 }
        ];

        const countrySel = document.getElementById("countrySelect");
        const plantSel = document.getElementById("plantSelect");

        const countries = [...new Set(nuclearData.map(d => d.country))].sort();
        countries.forEach(c => {
            const opt = document.createElement("option");
            opt.value = c;
            opt.textContent = c;
            countrySel.appendChild(opt);
        });

        countrySel.addEventListener("change", () => {
            plantSel.innerHTML = '<option value="">-- Select Plant --</option>';
            const plants = nuclearData.filter(d => d.country === countrySel.value);
            plants.forEach(p => {
                const opt = document.createElement("option");
                opt.value = `${p.lat},${p.lon}`;
                opt.textContent = p.name;
                plantSel.appendChild(opt);
            });
        });

        function calculateFallout() {
            const coords = plantSel.value.split(",");
            const lat = parseFloat(coords[0]);
            const lon = parseFloat(coords[1]);
            const windSpeed = parseFloat(document.getElementById("windSpeed").value);
            const windDir = parseFloat(document.getElementById("windDir").value);

            map.setView([lat, lon], 7);

            const falloutDistance = windSpeed * 1.5;  // Simplified model
            const angleRad = windDir * Math.PI / 180;

            const falloutLat = lat + (falloutDistance / 111) * Math.cos(angleRad);
            const falloutLon = lon + (falloutDistance / 111) * Math.sin(angleRad) / Math.cos(lat * Math.PI / 180);

            L.marker([lat, lon]).addTo(map).bindPopup("Nuclear Plant").openPopup();
            L.circle([falloutLat, falloutLon], { radius: 5000, color: "red" }).addTo(map);
        }
    </script>
</body>
</html>
